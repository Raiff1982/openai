@page "/sentiment-analysis"
@inject SentimentAnalysis SentimentAnalysisService
@inject ILogger<SentimentAnalysisComponent> Logger

<h3>Sentiment Analysis</h3>

<EditForm Model="inputModel" OnValidSubmit="AnalyzeSentiment">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label for="textInput" class="form-label">Enter Text:</label>
        <InputText id="textInput" class="form-control" @bind-Value="inputModel.Text" />
    </div>

    <button type="submit" class="btn btn-primary">Analyze</button>
</EditForm>

@if (prediction != null)
{
    <div class="mt-3">
        <h4>Prediction Result:</h4>
        <p>Prediction: @prediction.Prediction</p>
        <p>Probability: @prediction.Probability</p>
        <p>Score: @prediction.Score</p>
    </div>
}

@code {
    private SentimentInputModel inputModel = new SentimentInputModel();
    private SentimentAnalysis.SentimentPrediction? prediction;

    private async Task AnalyzeSentiment()
    {
        prediction = SentimentAnalysisService.Predict(inputModel.Text);
        Logger.LogInformation($"Text: {inputModel.Text}, Prediction: {prediction.Prediction}, Probability: {prediction.Probability}");
    }

    public class SentimentInputModel
    {
        public string Text { get; set; }
    }
}
